[gd_scene load_steps=12 format=3 uid="uid://showcase_scene"]

[ext_resource type="Script" path="res://scripts/orbit_camera.gd" id="1_orbit_cam"]

; [sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_hdri"]
; # Placeholder - replace with actual HDRI texture
; # panorama = ExtResource("hdri_texture")
; sky_cover = null

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_fallback"]
sky_top_color = Color(0.05, 0.05, 0.12, 1)
sky_horizon_color = Color(0.15, 0.12, 0.18, 1)
ground_bottom_color = Color(0.02, 0.02, 0.03, 1)
ground_horizon_color = Color(0.08, 0.06, 0.1, 1)
sun_angle_max = 15.0
sun_curve = 0.05

[sub_resource type="Sky" id="Sky_main"]
sky_material = SubResource("ProceduralSkyMaterial_fallback")
radiance_size = 3
process_mode = 1

[sub_resource type="Environment" id="Environment_showcase"]
background_mode = 2
sky = SubResource("Sky_main")
sky_custom_fov = 0.0
sky_rotation = Vector3(0, 0, 0)

; === AMBIENT (From sky for reflections) ===
ambient_light_source = 2
ambient_light_color = Color(1, 1, 1, 1)
ambient_light_sky_contribution = 0.8
ambient_light_energy = 0.2
reflected_light_source = 2

; === TONEMAPPING (Cinematic ACES) ===
tonemap_mode = 3
tonemap_exposure = 1.0
tonemap_white = 6.0

; === SSAO (Disabled - bake AO) ===
ssao_enabled = false

; === SSIL (Disabled) ===
ssil_enabled = false

; === SDFGI (Disabled) ===
sdfgi_enabled = false

; === GLOW (Subtle cinematic bloom) ===
glow_enabled = true
glow_intensity = 0.6
glow_strength = 1.0
glow_mix = 0.05
glow_bloom = 0.15
glow_blend_mode = 2
glow_hdr_threshold = 0.9
glow_hdr_scale = 2.0
glow_hdr_luminance_cap = 12.0
glow_map_strength = 0.0
glow_levels/1 = 1.0
glow_levels/2 = 0.5
glow_levels/3 = 0.25
glow_levels/4 = 0.0
glow_levels/5 = 0.0
glow_levels/6 = 0.0
glow_levels/7 = 0.0

; === COLOR CORRECTION ===
adjustment_enabled = true
adjustment_brightness = 1.0
adjustment_contrast = 1.05
adjustment_saturation = 1.1

[sub_resource type="CameraAttributesPractical" id="CameraAttributes_showcase"]
exposure_sensitivity = 100.0
auto_exposure_enabled = false
dof_blur_far_enabled = false
dof_blur_near_enabled = false

; === STANDARD PBR MATERIAL (Metallic Sphere) ===
[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_pbr_showcase"]
resource_name = "PBR_Showcase_Material"

; Shading
shading_mode = 1
diffuse_mode = 1
specular_mode = 1

; Albedo
albedo_color = Color(0.95, 0.93, 0.88, 1)

; Metallic
metallic = 0.9
metallic_specular = 0.5

; Roughness
roughness = 0.15

; Normal (enable when texture added)
normal_enabled = false
normal_scale = 1.0

; Ambient Occlusion (enable when texture added)
ao_enabled = false
ao_light_affect = 0.5

; Emission
emission_enabled = false

; Rim (subtle edge highlight)
rim_enabled = true
rim = 0.1
rim_tint = 0.3

; Clearcoat (optional extra gloss layer)
clearcoat_enabled = false
clearcoat = 0.2
clearcoat_roughness = 0.1

; Anisotropy
anisotropy_enabled = false

; Subsurface Scattering (disabled for mobile)
subsurf_scatter_enabled = false

; Back Lighting
backlight_enabled = false

; Refraction (disabled)
refraction_enabled = false

; Detail (disabled)
detail_enabled = false

; UV
uv1_scale = Vector3(1, 1, 1)
uv1_offset = Vector3(0, 0, 0)
uv1_triplanar = false

; Texture filter
texture_filter = 4

; === FLOOR MATERIAL ===
[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_floor"]
resource_name = "Floor_Material"
albedo_color = Color(0.08, 0.08, 0.1, 1)
metallic = 0.0
roughness = 0.95
rim_enabled = false

; === MESHES ===
[sub_resource type="SphereMesh" id="SphereMesh_showcase"]
radius = 1.0
height = 2.0
radial_segments = 64
rings = 32

[sub_resource type="PlaneMesh" id="PlaneMesh_floor"]
size = Vector2(20, 20)
subdivide_width = 4
subdivide_depth = 4

[sub_resource type="SphereMesh" id="SphereMesh_pedestal"]
radius = 0.3
height = 0.6
radial_segments = 32
rings = 16

; === SCENE TREE ===

[node name="ShowcaseScene" type="Node3D"]

; === ENVIRONMENT ===
[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_showcase")

; === MAIN DIRECTIONAL LIGHT (Key Light) ===
[node name="KeyLight" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866, -0.433, 0.25, 0, 0.5, 0.866, -0.5, -0.75, 0.433, 5, 8, 3)
light_color = Color(1, 0.95, 0.9, 1)
light_energy = 1.5
light_indirect_energy = 0.3
light_volumetric_fog_energy = 0.0
light_bake_mode = 2
shadow_enabled = true
shadow_bias = 0.03
shadow_normal_bias = 2.0
shadow_opacity = 0.85
shadow_blur = 0.5
directional_shadow_mode = 0
directional_shadow_fade_start = 0.8
directional_shadow_max_distance = 30.0

; === FILL LIGHT (Subtle rim/fill) ===
[node name="FillLight" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866, 0.25, -0.433, 0, 0.866, 0.5, 0.5, -0.433, 0.75, -4, 4, -2)
light_color = Color(0.7, 0.8, 1, 1)
light_energy = 0.4
light_indirect_energy = 0.1
light_volumetric_fog_energy = 0.0
light_bake_mode = 2
shadow_enabled = false

; === ORBIT CAMERA ===
[node name="CameraPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="OrbitCamera" type="Camera3D" parent="CameraPivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 4)
attributes = SubResource("CameraAttributes_showcase")
fov = 50.0
near = 0.1
far = 100.0
script = ExtResource("1_orbit_cam")
orbit_speed = 0.005
zoom_speed = 0.1
min_distance = 2.0
max_distance = 10.0
damping = 0.92
pitch_limit_top = 80.0
pitch_limit_bottom = -30.0

; === SHOWCASE OBJECT ===
[node name="ShowcaseObject" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="Sphere" type="MeshInstance3D" parent="ShowcaseObject"]
mesh = SubResource("SphereMesh_showcase")
surface_material_override/0 = SubResource("StandardMaterial3D_pbr_showcase")
gi_mode = 1

[node name="Pedestal" type="MeshInstance3D" parent="ShowcaseObject"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.3, 0)
mesh = SubResource("SphereMesh_pedestal")
surface_material_override/0 = SubResource("StandardMaterial3D_floor")
gi_mode = 1

; === FLOOR ===
[node name="Floor" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
mesh = SubResource("PlaneMesh_floor")
surface_material_override/0 = SubResource("StandardMaterial3D_floor")
gi_mode = 1

; === REFLECTION PROBE (Local reflections) - REMOVED
; [node name="ReflectionProbe" type="ReflectionProbe" parent="."]
; transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
; update_mode = 0
; intensity = 1.0
; max_distance = 20.0
; size = Vector3(12, 8, 12)
; origin_offset = Vector3(0, 0, 0)
; box_projection = true
; interior = false
; enable_shadows = false
; cull_mask = 1048575
; mesh_lod_threshold = 1.0
; ambient_mode = 1
; ambient_color = Color(0.1, 0.1, 0.15, 1)
; ambient_color_energy = 0.2

; === LIGHTMAP GI (Baked lighting) - REMOVED FOR STABILITY
; [node name="LightmapGI" type="LightmapGI" parent="."]
; quality = 1
; bounces = 3
; bounce_indirect_energy = 1.0
; directional = true
; use_denoiser = true
; denoiser_strength = 0.1
; interior = false
; use_texture_for_bounces = true
; bias = 0.0005
; texel_scale = 1.0
; max_texture_size = 2048
; environment_mode = 1
; environment_custom_color = Color(0.1, 0.1, 0.15, 1)
; environment_custom_energy = 0.3
